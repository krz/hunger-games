"use strict";(self.webpackChunkhunger_game=self.webpackChunkhunger_game||[]).push([[752],{6102:function(e,n,t){var r=t(4165),a=t(5861),o=t(8386),i=t(9830),c=t(2541),u=t(5226),l=t(8547),s=t(9524),f=t(6311),d=t(3768),g=t(9025),v=t(8164),p=t(2834);n.Z=function(e){var n=e.isOpen,t=e.logos,b=e.closeAnnotation,Z=e.toggleLogoSelection,m=e.afterAnnotation,h=e.value,y=void 0===h?"":h,x=e.type,k=void 0===x?"":x,C=e.game,w=void 0===C?"unknown":C,j=(0,v.n)().annotateLogo,S=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var a,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.type,o=n.value,e.prev=1,g.rp){e.next=6;break}return e.next=5,d.Z.annotateLogos(t.filter((function(e){return e.selected})).map((function(e){return{logo_id:e.id,value:o,type:a}})));case 5:j({game:w,type:a,value:o,number:t.filter((function(e){return e.selected})).length});case 6:t.filter((function(e){return e.selected})).forEach((function(e){var n=e.id;Z(n)})),b(),null===m||void 0===m||m(t.filter((function(e){return e.selected})),{value:o,type:a}),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(n){return e.apply(this,arguments)}}();return(0,p.jsxs)(o.Z,{open:n,onClose:b,maxWidth:"xl",children:[(0,p.jsxs)(i.Z,{children:[(0,p.jsx)(l.Z,{variant:"h5",children:"Selected logos"}),(0,p.jsx)(f.Z,{logos:t.filter((function(e){return e.selected})),toggleLogoSelection:Z,sx:{padding:0}})]}),(0,p.jsx)(u.Z,{}),(0,p.jsx)(c.Z,{children:(0,p.jsx)(s.Z,{value:y,type:k,request:S,sx:{padding:[2,4]}})})]})}},3587:function(e,n,t){t.d(n,{S:function(){return b}});var r=t(1413),a=t(9439),o=t(5987),i=t(9867),c=t(3248),u=t(3865),l=t(3911),s=t(4964),f=t(2418),d=t(9421),g=t(2834),v=["value","barcode","type","count","updateMode","validate","isLoading"],p=["packager_code","qr_code","no_logo"],b=[{value:"",labelKey:"logos.type"},{value:"label",labelKey:"logos.label"},{value:"brand",labelKey:"logos.brand"},{value:"packager_code",labelKey:"logos.packager_code"},{value:"packaging",labelKey:"logos.packaging"},{value:"qr_code",labelKey:"logos.qr_code"},{value:"category",labelKey:"logos.category"},{value:"nutrition_label",labelKey:"logos.nutrition_label"},{value:"store",labelKey:"logos.store"},{value:"no_logo",labelKey:"logos.no_logo"}];n.Z=function(e){var n=e.value,t=e.barcode,Z=e.type,m=e.count,h=(e.updateMode,e.validate),y=(e.isLoading,(0,o.Z)(e,v)),x=(0,f.$G)().t,k=i.useState(n),C=(0,a.Z)(k,2),w=C[0],j=C[1],S=i.useState(Z),L=(0,a.Z)(S,2),_=L[0],P=L[1],K=i.useState(m),q=(0,a.Z)(K,2),I=q[0],z=q[1],M=i.useState(t),W=(0,a.Z)(M,2),B=W[0],E=W[1];return i.useLayoutEffect((function(){j(n)}),[n]),i.useLayoutEffect((function(){P(Z)}),[Z]),i.useLayoutEffect((function(){E(t)}),[t]),i.useLayoutEffect((function(){z(m)}),[m]),(0,g.jsxs)(c.Z,(0,r.Z)((0,r.Z)({direction:"column",spacing:{xs:1,sm:2,md:4}},y),{},{children:[(0,g.jsxs)(c.Z,{direction:{xs:"column",sm:"row"},spacing:1,wrap:"wrap",children:[(0,g.jsx)("p",{children:_}),(0,g.jsx)(u.Z,{fullWidth:!0,value:_,onChange:function(e){return P(e.target.value)},select:!0,label:x("logos.type"),size:"small",children:b.map((function(e){var n=e.value,t=e.labelKey;return(0,g.jsx)(l.Z,{value:n,children:x(t)},t)}))}),["label","category","packaging"].includes(_)?(0,g.jsx)(d.Z,{showKey:!0,fullWidth:!0,value:w,onChange:j,insightType:_,label:x("logos.value"),size:"small"}):(0,g.jsx)(u.Z,{fullWidth:!0,value:w,onChange:function(e){return j(e.target.value)},label:x("logos.value"),size:"small"})]}),(0,g.jsxs)(c.Z,{direction:{xs:"column",sm:"row"},spacing:1,children:[(0,g.jsx)(u.Z,{fullWidth:!0,value:B,onChange:function(e){return E(e.target.value)},label:x("logos.barcode"),size:"small"}),(0,g.jsx)(u.Z,{fullWidth:!0,value:I,onChange:function(e){return z(e.target.value)},label:"Max nb",type:"number",size:"small"})]}),(0,g.jsx)(s.Z,{onClick:function(){return h(function(e){var n=e.type,t=e.value,r=e.count,a=e.barcode,o=t.toLowerCase().trim();return p.includes(n)&&(o=""),{count:r,type:n,value:o,barcode:a.toLowerCase().trim()}}({type:_||"",value:w||"",barcode:B||"",count:I}))},variant:"contained",color:"primary",fullWidth:!0,children:x("logos.search")})]}))}},8164:function(e,n,t){t.d(n,{n:function(){return u}});var r,a=t(4942),o=t(5921),i=t(9025),c=(r={},(0,a.Z)(r,i.Q8,"yes"),(0,a.Z)(r,i.hN,"no"),(0,a.Z)(r,i.PF,"skip"),r),u=function(){var e=(0,o.Z)().trackEvent;return{answerQuestions:function(n){e({category:"question-page",action:c[n]})},annotateLogo:function(n){var t=n.game,r=n.type,a=n.value,o=n.number;e({category:"logo",action:"annotation",name:"".concat(t," - ").concat(r," - ").concat(a),value:o})}}}},3752:function(e,n,t){t.r(n),t.d(n,{default:function(){return P}});var r=t(3433),a=t(9439),o=t(1413),i=t(4165),c=t(5861),u=t(9867),l=t(7835),s=t(3248),f=t(8976),d=t(4964),g=t(3911),v=t(3865),p=t(2418),b=t(9421),Z=t(6311),m=t(6102),h=t(3587),y=t(3768),x=t(3547),k=t(2068),C=t(8514),w=t(2834),j={categories:"category",labels:"label",packaging:"packaging"},S=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(n){var t,r,a,o,c,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.page,r=n.filter,e.prev=1,e.next=4,x.Z.searchProducts({page:t,pageSize:2,filters:[r]});case 4:return a=e.sent,o=a.data,c=o.count,u=o.products,e.abrupt("return",{count:c,codes:u.map((function(e){return e.code}))});case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",{count:0,codes:[]});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(n){return e.apply(this,arguments)}}(),L=function(e){var n=e.image.url||y.Z.getCroppedImageUrl(x.Z.getImageUrl(e.image.source_image),e.bounding_box);return(0,o.Z)((0,o.Z)({},e),{},{selected:!1,image:(0,o.Z)((0,o.Z)({},e.image),{},{src:n})})},_=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(n){var t,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.Z.searchLogos(n,void 0,void 0,30);case 2:return t=e.sent,r=t.data,e.abrupt("return",r.logos.map(L));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();function P(){var e=(0,p.$G)().t,n=(0,k.ZP)({tagtype:"labels",tag_contains:"contains",tag:"en:eg-oko-verordnung"},{tag:["valueTag","value_tag","value"],tagType:"type"}),t=(0,a.Z)(n,2),i=t[0],c=t[1],y=u.useState((function(){return i})),x=(0,a.Z)(y,2),L=x[0],P=x[1];u.useEffect((function(){P(i)}),[i]);var K=function(e){var n=u.useState(1),t=(0,a.Z)(n,2),i=t[0],c=t[1],l=u.useState(!1),s=(0,a.Z)(l,2),f=s[0],d=s[1],g=u.useState(!1),v=(0,a.Z)(g,2),p=v[0],b=v[1],Z=u.useState([]),m=(0,a.Z)(Z,2),h=m[0],y=m[1],x=u.useState([]),k=(0,a.Z)(x,2),C=k[0],w=k[1],j=u.useRef({});return u.useEffect((function(){c(1),d(!0),y([]),w([]),j.current={}}),[e]),u.useEffect((function(){var n=!0;return b(!0),d(!1),S({page:i,filter:e}).then((function(e){var t=e.count,a=e.codes;n&&(y((function(e){return[].concat((0,r.Z)(e),(0,r.Z)(a))})),b(!1),d(t>2*i))})).catch((function(){n&&(b(!1),d(!1))})),function(){n=!1}}),[e,i]),u.useEffect((function(){h.forEach((function(e){j.current[e]||(j.current[e]=!0,_(e).then((function(e){w((function(n){return[].concat((0,r.Z)(n),(0,r.Z)(e))}))})).catch((function(){})))}))}),[h]),[C,u.useCallback((function(){c((function(e){return e+1}))}),[]),p,f,u.useCallback((function(e){w((function(n){var t=n.findIndex((function(n){return n.id===e}));return t<0?n:[].concat((0,r.Z)(n.slice(0,t)),[(0,o.Z)((0,o.Z)({},n[t]),{},{selected:!n[t].selected})],(0,r.Z)(n.slice(t+1)))}))}),[]),u.useCallback((function(e,n){w((function(t){return t.map((function(t){return e.includes(t.id)?(0,o.Z)((0,o.Z)({},t),{},{selected:!1,annotation_type:n.type,annotation_value:n.value}):t}))}))}),[])]}(i),q=(0,a.Z)(K,6),I=q[0],z=q[1],M=q[2],W=q[3],B=q[4],E=q[5],A=u.useState(!1),N=(0,a.Z)(A,2),R=N[0],F=N[1],T=u.useCallback((function(){F(!0)}),[]),D=u.useCallback((function(){F(!1)}),[]);return(0,w.jsxs)(u.Suspense,{fallback:(0,w.jsx)(C.Z,{}),children:[(0,w.jsx)(f.Z,{sx:{padding:2,position:"sticky",top:0,zIndex:1},children:(0,w.jsxs)(s.Z,{direction:"row",spacing:1,children:[(0,w.jsx)(v.Z,{select:!0,value:L.tagtype,onChange:function(e){return P((function(n){return(0,o.Z)((0,o.Z)({},n),{},{tagtype:e.target.value})}))},label:"type",sx:{minWidth:200},children:h.S.map((function(n){var t=n.value,r=n.labelKey;return(0,w.jsx)(g.Z,{value:t,children:e(r)},t)}))}),["categories","labels"].includes(L.tagtype)?(0,w.jsx)(b.Z,{showKey:!0,value:L.tag,onChange:function(e){return P((function(n){return(0,o.Z)((0,o.Z)({},n),{},{tag:e})}))},label:"tag",sx:{minWidth:200},insightType:j[L.tagtype]}):(0,w.jsx)(v.Z,{value:L.tag,onChange:function(e){return P((function(n){return(0,o.Z)((0,o.Z)({},n),{},{tag:e.target.value})}))},label:"tag",sx:{minWidth:200}}),(0,w.jsx)(d.Z,{onClick:function(){c(L)},children:"Search"})]})}),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(Z.Z,{logos:I,toggleLogoSelection:B}),(0,w.jsxs)(f.Z,{sx:{py:1,position:"sticky",bottom:0},children:[M&&(0,w.jsx)(l.Z,{sx:{my:2}}),(0,w.jsxs)(s.Z,{direction:"row",spacing:2,children:[(0,w.jsx)(d.Z,{fullWidth:!0,variant:"contained",onClick:z,disabled:M||!W,children:"Load More"}),(0,w.jsx)(d.Z,{fullWidth:!0,variant:"contained",color:"success",onClick:T,children:"Annotate"})]})]}),(0,w.jsx)(m.Z,{game:"logoProductAnnotation",isOpen:R,logos:I,closeAnnotation:D,toggleLogoSelection:B,afterAnnotation:function(e,n){E(e.map((function(e){return e.id})),n)}})]})]})}},7835:function(e,n,t){t.d(n,{Z:function(){return R}});var r=t(168),a=t(3366),o=t(7462),i=t(9867),c=t(2026),u=t(6020),l=t(4923),s=t(7237),f=t(6892),d=t(2689),g=t(3078),v=t(7090),p=t(5157),b=t(3845);function Z(e){return(0,b.Z)("MuiLinearProgress",e)}(0,p.Z)("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);var m,h,y,x,k,C,w,j,S,L,_,P,K=t(2834),q=["className","color","value","valueBuffer","variant"],I=(0,l.F4)(w||(w=m||(m=(0,r.Z)(["\n  0% {\n    left: -35%;\n    right: 100%;\n  }\n\n  60% {\n    left: 100%;\n    right: -90%;\n  }\n\n  100% {\n    left: 100%;\n    right: -90%;\n  }\n"])))),z=(0,l.F4)(j||(j=h||(h=(0,r.Z)(["\n  0% {\n    left: -200%;\n    right: 100%;\n  }\n\n  60% {\n    left: 107%;\n    right: -8%;\n  }\n\n  100% {\n    left: 107%;\n    right: -8%;\n  }\n"])))),M=(0,l.F4)(S||(S=y||(y=(0,r.Z)(["\n  0% {\n    opacity: 1;\n    background-position: 0 -23px;\n  }\n\n  60% {\n    opacity: 0;\n    background-position: 0 -23px;\n  }\n\n  100% {\n    opacity: 1;\n    background-position: -200px -23px;\n  }\n"])))),W=function(e,n){return"inherit"===n?"currentColor":e.vars?e.vars.palette.LinearProgress["".concat(n,"Bg")]:"light"===e.palette.mode?(0,s.$n)(e.palette[n].main,.62):(0,s._j)(e.palette[n].main,.5)},B=(0,g.ZP)("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[n.root,n["color".concat((0,f.Z)(t.color))],n[t.variant]]}})((function(e){var n=e.ownerState,t=e.theme;return(0,o.Z)({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:W(t,n.color)},"inherit"===n.color&&"buffer"!==n.variant&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},"buffer"===n.variant&&{backgroundColor:"transparent"},"query"===n.variant&&{transform:"rotate(180deg)"})})),E=(0,g.ZP)("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:function(e,n){var t=e.ownerState;return[n.dashed,n["dashedColor".concat((0,f.Z)(t.color))]]}})((function(e){var n=e.ownerState,t=e.theme,r=W(t,n.color);return(0,o.Z)({position:"absolute",marginTop:0,height:"100%",width:"100%"},"inherit"===n.color&&{opacity:.3},{backgroundImage:"radial-gradient(".concat(r," 0%, ").concat(r," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})}),(0,l.iv)(L||(L=x||(x=(0,r.Z)(["\n    animation: "," 3s infinite linear;\n  "]))),M)),A=(0,g.ZP)("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:function(e,n){var t=e.ownerState;return[n.bar,n["barColor".concat((0,f.Z)(t.color))],("indeterminate"===t.variant||"query"===t.variant)&&n.bar1Indeterminate,"determinate"===t.variant&&n.bar1Determinate,"buffer"===t.variant&&n.bar1Buffer]}})((function(e){var n=e.ownerState,t=e.theme;return(0,o.Z)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:"inherit"===n.color?"currentColor":(t.vars||t).palette[n.color].main},"determinate"===n.variant&&{transition:"transform .".concat(4,"s linear")},"buffer"===n.variant&&{zIndex:1,transition:"transform .".concat(4,"s linear")})}),(function(e){var n=e.ownerState;return("indeterminate"===n.variant||"query"===n.variant)&&(0,l.iv)(_||(_=k||(k=(0,r.Z)(["\n      width: auto;\n      animation: "," 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;\n    "]))),I)})),N=(0,g.ZP)("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:function(e,n){var t=e.ownerState;return[n.bar,n["barColor".concat((0,f.Z)(t.color))],("indeterminate"===t.variant||"query"===t.variant)&&n.bar2Indeterminate,"buffer"===t.variant&&n.bar2Buffer]}})((function(e){var n=e.ownerState,t=e.theme;return(0,o.Z)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},"buffer"!==n.variant&&{backgroundColor:"inherit"===n.color?"currentColor":(t.vars||t).palette[n.color].main},"inherit"===n.color&&{opacity:.3},"buffer"===n.variant&&{backgroundColor:W(t,n.color),transition:"transform .".concat(4,"s linear")})}),(function(e){var n=e.ownerState;return("indeterminate"===n.variant||"query"===n.variant)&&(0,l.iv)(P||(P=C||(C=(0,r.Z)(["\n      width: auto;\n      animation: "," 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;\n    "]))),z)})),R=i.forwardRef((function(e,n){var t=(0,v.Z)({props:e,name:"MuiLinearProgress"}),r=t.className,i=t.color,l=void 0===i?"primary":i,s=t.value,g=t.valueBuffer,p=t.variant,b=void 0===p?"indeterminate":p,m=(0,a.Z)(t,q),h=(0,o.Z)({},t,{color:l,variant:b}),y=function(e){var n=e.classes,t=e.variant,r=e.color,a={root:["root","color".concat((0,f.Z)(r)),t],dashed:["dashed","dashedColor".concat((0,f.Z)(r))],bar1:["bar","barColor".concat((0,f.Z)(r)),("indeterminate"===t||"query"===t)&&"bar1Indeterminate","determinate"===t&&"bar1Determinate","buffer"===t&&"bar1Buffer"],bar2:["bar","buffer"!==t&&"barColor".concat((0,f.Z)(r)),"buffer"===t&&"color".concat((0,f.Z)(r)),("indeterminate"===t||"query"===t)&&"bar2Indeterminate","buffer"===t&&"bar2Buffer"]};return(0,u.Z)(a,Z,n)}(h),x=(0,d.Z)(),k={},C={bar1:{},bar2:{}};if("determinate"===b||"buffer"===b)if(void 0!==s){k["aria-valuenow"]=Math.round(s),k["aria-valuemin"]=0,k["aria-valuemax"]=100;var w=s-100;"rtl"===x.direction&&(w=-w),C.bar1.transform="translateX(".concat(w,"%)")}else 0;if("buffer"===b)if(void 0!==g){var j=(g||0)-100;"rtl"===x.direction&&(j=-j),C.bar2.transform="translateX(".concat(j,"%)")}else 0;return(0,K.jsxs)(B,(0,o.Z)({className:(0,c.Z)(y.root,r),ownerState:h,role:"progressbar"},k,{ref:n},m,{children:["buffer"===b?(0,K.jsx)(E,{className:y.dashed,ownerState:h}):null,(0,K.jsx)(A,{className:y.bar1,ownerState:h,style:C.bar1}),"determinate"===b?null:(0,K.jsx)(N,{className:y.bar2,ownerState:h,style:C.bar2})]}))}))}}]);
//# sourceMappingURL=752.c72f6729.chunk.js.map