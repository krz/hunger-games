"use strict";(self.webpackChunkhunger_game=self.webpackChunkhunger_game||[]).push([[230],{6102:function(e,n,o){var t=o(4165),r=o(5861),i=o(8386),a=o(9830),s=o(2541),c=o(5226),l=o(8547),u=o(9524),d=o(6311),g=o(3768),f=o(9025),p=o(8164),v=o(2834);n.Z=function(e){var n=e.isOpen,o=e.logos,h=e.closeAnnotation,Z=e.toggleLogoSelection,x=e.afterAnnotation,m=e.value,b=void 0===m?"":m,w=e.type,k=void 0===w?"":w,y=e.game,S=void 0===y?"unknown":y,j=(0,p.n)().annotateLogo,_=function(){var e=(0,r.Z)((0,t.Z)().mark((function e(n){var r,i;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.type,i=n.value,e.prev=1,f.rp){e.next=6;break}return e.next=5,g.Z.annotateLogos(o.filter((function(e){return e.selected})).map((function(e){return{logo_id:e.id,value:i,type:r}})));case 5:j({game:S,type:r,value:i,number:o.filter((function(e){return e.selected})).length});case 6:o.filter((function(e){return e.selected})).forEach((function(e){var n=e.id;Z(n)})),h(),null===x||void 0===x||x(o.filter((function(e){return e.selected})),{value:i,type:r}),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(n){return e.apply(this,arguments)}}();return(0,v.jsxs)(i.Z,{open:n,onClose:h,maxWidth:"xl",children:[(0,v.jsxs)(a.Z,{children:[(0,v.jsx)(l.Z,{variant:"h5",children:"Selected logos"}),(0,v.jsx)(d.Z,{logos:o.filter((function(e){return e.selected})),toggleLogoSelection:Z,sx:{padding:0}})]}),(0,v.jsx)(c.Z,{}),(0,v.jsx)(s.Z,{children:(0,v.jsx)(u.Z,{value:b,type:k,request:_,sx:{padding:[2,4]}})})]})}},8164:function(e,n,o){o.d(n,{n:function(){return c}});var t,r=o(4942),i=o(5921),a=o(9025),s=(t={},(0,r.Z)(t,a.Q8,"yes"),(0,r.Z)(t,a.hN,"no"),(0,r.Z)(t,a.PF,"skip"),t),c=function(){var e=(0,i.Z)().trackEvent;return{answerQuestions:function(n){e({category:"question-page",action:s[n]})},annotateLogo:function(n){var o=n.game,t=n.type,r=n.value,i=n.number;e({category:"logo",action:"annotation",name:"".concat(o," - ").concat(t," - ").concat(r),value:i})}}}},8230:function(e,n,o){o.r(n),o.d(n,{default:function(){return K},getQuestionSearchParams:function(){return B}});var t=o(3433),r=o(9439),i=o(4165),a=o(1413),s=o(5861),c=o(9867),l=o(3248),u=o(7298),d=o(4964),g=o(8514),f=o(8547),p=o(829),v=o(2689),h=o(2418),Z=o(5644),x=o(3768),m=o(3547),b=o(6311),w=o(7462),k=o(3366),y=["getTrigger","target"];function S(e,n){var o=n.disableHysteresis,t=void 0!==o&&o,r=n.threshold,i=void 0===r?100:r,a=n.target,s=e.current;return a&&(e.current=void 0!==a.pageYOffset?a.pageYOffset:a.scrollTop),!(!t&&void 0!==s&&e.current<s)&&e.current>i}var j="undefined"!==typeof window?window:null;var _=o(4942),L=o(2026),C=o(6020),z=o(1322),F=o(6892),R=o(7090),A=o(5157),I=o(3845);function E(e){return(0,I.Z)("MuiFab",e)}var N=(0,A.Z)("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),O=o(3078),W=o(2834),M=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],P=(0,O.ZP)(z.Z,{name:"MuiFab",slot:"Root",shouldForwardProp:function(e){return(0,O.FO)(e)||"classes"===e},overridesResolver:function(e,n){var o=e.ownerState;return[n.root,n[o.variant],n["size".concat((0,F.Z)(o.size))],"inherit"===o.color&&n.colorInherit,n[(0,F.Z)(o.size)],n[o.color]]}})((function(e){var n,o,t=e.theme,r=e.ownerState;return(0,w.Z)({},t.typography.button,(0,_.Z)({minHeight:36,transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(t.vars||t).zIndex.fab,boxShadow:(t.vars||t).shadows[6],"&:active":{boxShadow:(t.vars||t).shadows[12]},color:t.vars?t.vars.palette.text.primary:null==(n=(o=t.palette).getContrastText)?void 0:n.call(o,t.palette.grey[300]),backgroundColor:(t.vars||t).palette.grey[300],"&:hover":{backgroundColor:(t.vars||t).palette.grey.A100,"@media (hover: none)":{backgroundColor:(t.vars||t).palette.grey[300]},textDecoration:"none"}},"&.".concat(N.focusVisible),{boxShadow:(t.vars||t).shadows[6]}),"small"===r.size&&{width:40,height:40},"medium"===r.size&&{width:48,height:48},"extended"===r.variant&&{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},"extended"===r.variant&&"small"===r.size&&{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"extended"===r.variant&&"medium"===r.size&&{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40},"inherit"===r.color&&{color:"inherit"})}),(function(e){var n=e.theme,o=e.ownerState;return(0,w.Z)({},"inherit"!==o.color&&"default"!==o.color&&null!=(n.vars||n).palette[o.color]&&{color:(n.vars||n).palette[o.color].contrastText,backgroundColor:(n.vars||n).palette[o.color].main,"&:hover":{backgroundColor:(n.vars||n).palette[o.color].dark,"@media (hover: none)":{backgroundColor:(n.vars||n).palette[o.color].main}}})}),(function(e){var n=e.theme;return(0,_.Z)({},"&.".concat(N.disabled),{color:(n.vars||n).palette.action.disabled,boxShadow:(n.vars||n).shadows[0],backgroundColor:(n.vars||n).palette.action.disabledBackground})})),T=c.forwardRef((function(e,n){var o=(0,R.Z)({props:e,name:"MuiFab"}),t=o.children,r=o.className,i=o.color,a=void 0===i?"default":i,s=o.component,c=void 0===s?"button":s,l=o.disabled,u=void 0!==l&&l,d=o.disableFocusRipple,g=void 0!==d&&d,f=o.focusVisibleClassName,p=o.size,v=void 0===p?"large":p,h=o.variant,Z=void 0===h?"circular":h,x=(0,k.Z)(o,M),m=(0,w.Z)({},o,{color:a,component:c,disabled:u,disableFocusRipple:g,size:v,variant:Z}),b=function(e){var n=e.color,o=e.variant,t=e.classes,r=e.size,i={root:["root",o,"size".concat((0,F.Z)(r)),"inherit"===n?"colorInherit":n]},a=(0,C.Z)(i,E,t);return(0,w.Z)({},t,a)}(m);return(0,W.jsx)(P,(0,w.Z)({className:(0,L.Z)(b.root,r),component:c,disabled:u,focusRipple:!g,focusVisibleClassName:(0,L.Z)(b.focusVisible,f),ownerState:m,ref:n},x,{classes:b,children:t}))})),V=o(5255),U=o(9858),H=o(3262);function q(){var e=c.useState(!1),n=(0,r.Z)(e,2),o=n[0],t=n[1],i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.getTrigger,o=void 0===n?S:n,t=e.target,i=void 0===t?j:t,a=(0,k.Z)(e,y),s=c.useRef(),l=c.useState((function(){return o(s,a)})),u=(0,r.Z)(l,2),d=u[0],g=u[1];return c.useEffect((function(){var e=function(){g(o(s,(0,w.Z)({target:i},a)))};return e(),i.addEventListener("scroll",e,{passive:!0}),function(){i.removeEventListener("scroll",e,{passive:!0})}}),[i,o,JSON.stringify(a)]),d}({disableHysteresis:!0,threshold:200});return(0,W.jsx)(H.Z,{in:i,children:(0,W.jsx)(V.Z,{title:"Scroll to top",open:o,onClose:function(){t(!1)},onOpen:function(){t(!0)},children:(0,W.jsx)(T,{sx:function(e){return{position:"fixed",bottom:24,right:24,zIndex:10,backgroundColor:e.palette.secondary.light,boxShadow:"0px 4px 20px rgba(170, 180, 190, 0.3)","&:hover":{backgroundColor:void 0},"&:active":{boxShadow:"0px 4px 20px rgba(170, 180, 190, 0.6)"}}},size:"small","aria-label":"Scroll to top",onClick:function(){window.scrollTo({top:0}),t(!1)},children:(0,W.jsx)(U.Z,{sx:{color:"black"}})})})})}var Q=o(2068),Y=o(6102),B=function(e){var n=new URLSearchParams(window.location.search);return Object.keys(G).forEach((function(o){void 0===n.get(o)||e[o]?e[o]&&n.get(o)!==e[o]&&n.set(o,e[o]):n.delete(o)})),n.toString()},G={count:50,logo_id:"",index:""},D=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n,o){var t,r,s,c,l,u,d,g,f,p,v,h=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>2&&void 0!==h[2]?h[2]:50,r=h.length>3&&void 0!==h[3]?h[3]:[],e.next=4,x.Z.getLogoAnnotations(n,o,t);case 4:return s=e.sent,c=s.data,l=c.results,u=c.query_logo_id,l.unshift({logo_id:Number.parseInt(u),distance:0}),d={},r.forEach((function(e){var n=e.id;d[n]=!0})),g=l.filter((function(e){var n=e.logo_id;return!d[n]})),e.next=14,x.Z.getLogosImages(g.map((function(e){return e.logo_id})));case 14:return f=e.sent,p=f.data.logos,v=g.map((function(e){var n=e.logo_id,o=e.distance,t=p.find((function(e){return e.id===n})),r=t.image,i=x.Z.getCroppedImageUrl(m.Z.getImageUrl(r.source_image),t.bounding_box);return(0,a.Z)((0,a.Z)({distance:o},t),{},{image:(0,a.Z)((0,a.Z)({},r),{},{src:i})})})),e.abrupt("return",v);case 18:case"end":return e.stop()}}),e)})));return function(n,o){return e.apply(this,arguments)}}(),J={logos:[],isLoading:!0,referenceLogo:{}};function K(){var e,n,o=(0,h.$G)().t,x=(0,v.Z)(),m=(0,Q.ZP)(G,{}),w=(0,r.Z)(m,1)[0],k=c.useState(J),y=(0,r.Z)(k,2),S=y[0],j=y[1],_=c.useState(0),L=(0,r.Z)(_,2),C=L[0],z=L[1],F=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n){var o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((o=C+n)>500)){e.next=3;break}return e.abrupt("return");case 3:z(o),j((function(e){return(0,a.Z)((0,a.Z)({},e),{},{isLoading:!0})})),D(w.logo_id,w.index,w.count+o,S.logos).then((function(e){j((function(n){return(0,a.Z)((0,a.Z)({},n),{},{isLoading:!1,logos:[].concat((0,t.Z)(n.logos),(0,t.Z)(e.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{selected:!1})}))))})}))})).catch((function(){}));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();c.useEffect((function(){var e=!0;return j((0,a.Z)({isLoading:!0},J)),D(w.logo_id,w.index,w.count).then((function(n){e&&j({isLoading:!1,logos:n.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{selected:w.logo_id===e.id.toString()})})),referenceLogo:n.find((function(e){return e.id.toString()===w.logo_id}))||{}})})).catch((function(){e&&j(J)})),function(){e=!1}}),[w.count,w.logo_id,w.index]);var R=c.useCallback((function(e){e.toString()!==w.logo_id&&j((function(n){var o=n.logos.findIndex((function(n){return n.id===e}));return o<0?n:(0,a.Z)((0,a.Z)({},n),{},{logos:[].concat((0,t.Z)(n.logos.slice(0,o)),[(0,a.Z)((0,a.Z)({},n.logos[o]),{},{selected:!n.logos[o].selected})],(0,t.Z)(n.logos.slice(o+1)))})}))}),[w.logo_id]),A=c.useCallback((function(e,n){var o={};e.forEach((function(e){return o[e]=!0})),j((function(e){return(0,a.Z)((0,a.Z)({},e),{},{logos:e.logos.map((function(e){return o[e.id]?(0,a.Z)((0,a.Z)({},e),{},{selected:n}):e}))})}))}),[]),I=c.useState(!1),E=(0,r.Z)(I,2),N=E[0],O=E[1],M=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,e.next=4,D(w.logo_id,w.index,w.count);case 4:n=e.sent,j({isLoading:!1,logos:n.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{selected:w.logo_id===e.id.toString()})})),referenceLogo:n.find((function(e){return e.id.toString()===w.logo_id}))||{}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),j(J);case 11:O(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),P=c.useState(!1),T=(0,r.Z)(P,2),V=T[0],U=T[1],H=c.useCallback((function(){U(!0)}),[]),B=c.useCallback((function(){U(!1)}),[]),K=S.logos.filter((function(e){return e.selected})).map((function(e){return e.id}));return S.isLoading&&o("logos.loading"),(0,W.jsx)(c.Suspense,{fallback:(0,W.jsx)(g.Z,{}),children:(0,W.jsxs)(u.Z,{sx:{margin:"2% 10%"},children:[(0,W.jsx)(f.Z,{typography:"h2",sx:{fontSize:"1.5rem",fontWeight:600,marginBottom:2},children:o("logos.annotations")}),(0,W.jsx)(f.Z,{children:o("logos.task_description")}),(0,W.jsx)(u.Z,{sx:{position:"sticky",top:0,zIndex:1,paddingY:2,background:"linear-gradient(0deg, ".concat(x.palette.background.paper,"00 0%, ").concat(x.palette.background.paper,"FF 25px, ").concat(x.palette.background.paper,"FF 100%)"),backdropFilter:"blur(5px)"},elevation:0,children:(0,W.jsxs)(l.Z,{direction:"row",spacing:1,sx:{my:1},children:[(0,W.jsx)(d.Z,{variant:"outlined",size:"small",onClick:function(){j((function(e){return(0,a.Z)((0,a.Z)({},e),{},{logos:e.logos.map((function(e,n){return null===e.annotation_value&&(e.selected=!0),e}))})}))},children:o("logos.select_all")}),(0,W.jsx)(d.Z,{variant:"outlined",size:"small",disabled:0===K.length||1===K.length&&K[0].toString()===w.logo_id,onClick:function(){j((function(e){return(0,a.Z)((0,a.Z)({},e),{},{logos:e.logos.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{selected:e.id.toString()===w.logo_id})}))})}))},children:o("logos.unselect_all")}),(0,W.jsx)(p.Z,{variant:"outlined",size:"small",onClick:M,loading:N,children:o("logos.refresh")}),(0,W.jsx)("div",{style:{flexGrow:1}}),(0,W.jsx)(d.Z,{size:"small",variant:"contained",color:"secondary",component:Z.rU,to:"/logos/search/",children:o("logos.search_specific")})]})}),S.isLoading&&(0,W.jsx)(u.Z,{sx:{width:"100%",textAlign:"center",py:10},children:(0,W.jsx)(g.Z,{})}),(0,W.jsx)(b.Z,{logos:S.logos,toggleLogoSelection:R,setLogoSelectionRange:A,sx:{justifyContent:"center"}}),(0,W.jsx)(u.Z,{sx:{my:5,textAlign:"center"},children:(0,W.jsx)(d.Z,{fullWidth:!0,variant:"contained",disabled:S.isLoading||C+50>500,onClick:function(){F(50)},children:o("logos.load_more")})}),(0,W.jsx)(u.Z,{sx:{my:5,textAlign:"center",position:"sticky",bottom:0},children:(0,W.jsx)(d.Z,{fullWidth:!0,onClick:H,color:"success",variant:"contained",children:"Annotate"})}),(0,W.jsx)(Y.Z,{game:"logoAnnotation",value:null!==(e=S.referenceLogo.annotation_value)&&void 0!==e?e:"",type:null!==(n=S.referenceLogo.annotation_type)&&void 0!==n?n:"",isOpen:V,logos:S.logos,closeAnnotation:B,toggleLogoSelection:R,afterAnnotation:function(e,n){var o=e.map((function(e){return e.id}));j((function(e){return(0,a.Z)((0,a.Z)({},e),{},{logos:e.logos.map((function(e){return o.includes(e.id)?(0,a.Z)((0,a.Z)({},e),{},{selected:!1,annotation_type:n.type,annotation_value:n.value}):e}))})}))}}),(0,W.jsx)(q,{})]})})}},9858:function(e,n,o){var t=o(4836);n.Z=void 0;var r=t(o(5511)),i=o(2834),a=(0,r.default)((0,i.jsx)("path",{d:"M8.12 14.71 12 10.83l3.88 3.88c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L12.7 8.71a.9959.9959 0 0 0-1.41 0L6.7 13.3c-.39.39-.39 1.02 0 1.41.39.38 1.03.39 1.42 0z"}),"KeyboardArrowUpRounded");n.Z=a}}]);
//# sourceMappingURL=230.58cd0b2d.chunk.js.map