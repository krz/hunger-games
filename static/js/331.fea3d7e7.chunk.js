"use strict";(self.webpackChunkhunger_game=self.webpackChunkhunger_game||[]).push([[331],{6102:function(n,e,t){var r=t(4165),a=t(5861),o=t(8386),i=t(9830),c=t(2541),u=t(5226),s=t(8547),l=t(9524),f=t(6311),d=t(3768),v=t(9025),g=t(8164),p=t(2834);e.Z=function(n){var e=n.isOpen,t=n.logos,Z=n.closeAnnotation,m=n.toggleLogoSelection,h=n.afterAnnotation,b=n.value,x=void 0===b?"":b,y=n.type,k=void 0===y?"":y,w=n.game,j=void 0===w?"unknown":w,S=(0,g.n)().annotateLogo,C=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(e){var a,o;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=e.type,o=e.value,n.prev=1,v.rp){n.next=6;break}return n.next=5,d.Z.annotateLogos(t.filter((function(n){return n.selected})).map((function(n){return{logo_id:n.id,value:o,type:a}})));case 5:S({game:j,type:a,value:o,number:t.filter((function(n){return n.selected})).length});case 6:t.filter((function(n){return n.selected})).forEach((function(n){var e=n.id;m(e)})),Z(),null===h||void 0===h||h(t.filter((function(n){return n.selected})),{value:o,type:a}),n.next=13;break;case 11:n.prev=11,n.t0=n.catch(1);case 13:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(e){return n.apply(this,arguments)}}();return(0,p.jsxs)(o.Z,{open:e,onClose:Z,maxWidth:"xl",children:[(0,p.jsxs)(i.Z,{children:[(0,p.jsx)(s.Z,{variant:"h5",children:"Selected logos"}),(0,p.jsx)(f.Z,{logos:t.filter((function(n){return n.selected})),toggleLogoSelection:m,sx:{padding:0}})]}),(0,p.jsx)(u.Z,{}),(0,p.jsx)(c.Z,{children:(0,p.jsx)(l.Z,{value:x,type:k,request:C,sx:{padding:[2,4]}})})]})}},8164:function(n,e,t){t.d(e,{n:function(){return u}});var r,a=t(4942),o=t(5921),i=t(9025),c=(r={},(0,a.Z)(r,i.Q8,"yes"),(0,a.Z)(r,i.hN,"no"),(0,a.Z)(r,i.PF,"skip"),r),u=function(){var n=(0,o.Z)().trackEvent;return{answerQuestions:function(e){n({category:"question-page",action:c[e]})},annotateLogo:function(e){var t=e.game,r=e.type,a=e.value,o=e.number;n({category:"logo",action:"annotation",name:"".concat(t," - ").concat(r," - ").concat(a),value:o})}}}},7331:function(n,e,t){t.r(e),t.d(e,{default:function(){return P}});var r=t(3433),a=t(9439),o=t(4165),i=t(5861),c=t(1413),u=t(9867),s=t(7298),l=t(5226),f=t(4964),d=t(8547),v=t(8976),g=t(9079),p=t(8514),Z=t(7835),m=t(6311),h=t(9524),b=t(3768),x=t(3547),y=t(2068),k=t(6102),w=t(2418),j=t(2834),S=function(n){var e=n.image.url||b.Z.getCroppedImageUrl(x.Z.getImageUrl(n.image.source_image),n.bounding_box);return(0,c.Z)((0,c.Z)({},n),{},{image:(0,c.Z)((0,c.Z)({},n.image),{},{src:e})})},C=function(){var n=(0,i.Z)((0,o.Z)().mark((function n(e){var t,r,a,i,c,u;return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.barcode,r=e.value,a=e.type,i=e.count,n.next=3,b.Z.searchLogos(t,r,a,Number.parseInt(i),!0);case 3:return c=n.sent,u=c.data,n.abrupt("return",{logos:u.logos.map(S),count:u.count});case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),L=function(){var n=(0,w.$G)().t;return(0,j.jsxs)(s.Z,{sx:{width:"100%",textAlign:"center",py:5,m:0},children:[(0,j.jsx)(d.Z,{variant:"subtitle1",children:n("logos.loading_messages.pending_reference_logos")}),(0,j.jsx)("br",{}),(0,j.jsx)(p.Z,{})]})},_=function(n){var e=n.type,t=n.value,r=(0,w.$G)().t;return(0,j.jsxs)(s.Z,{sx:{width:"100%",textAlign:"center",py:5,m:0},children:[(0,j.jsx)(d.Z,{variant:"subtitle1",children:r("logos.loading_messages.failed_reference_logos")}),(0,j.jsx)(f.Z,{color:"secondary",size:"small",component:g.Z,variant:"contained",href:"/logos/product-search?tag=".concat(t,"&tagtype=").concat(e),target:"_blank",sx:{ml:2,minWidth:150},children:"Search"})]})};function P(){var n,e=u.useState([]),t=(0,a.Z)(e,2),g=t[0],x=t[1],w=u.useState([]),P=(0,a.Z)(w,2),I=P[0],q=P[1],A=u.useState(25),B=(0,a.Z)(A,1)[0],M=(0,y.ZP)({type:"",value:""},{value:["valueTag","value_tag"]}),N=(0,a.Z)(M,2),R=N[0],D=N[1],E=50,z=u.useState(1),O=(0,a.Z)(z,2),F=O[0],W=O[1],$=u.useState(!0),G=(0,a.Z)($,2),H=G[0],Q=G[1],T=u.useState(!1),U=(0,a.Z)(T,2),X=U[0],J=U[1];u.useEffect((function(){var n=!0,e=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){var t,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C((0,c.Z)((0,c.Z)({},R),{},{count:B}));case 3:if(t=e.sent,a=t.logos,n){e.next=7;break}return e.abrupt("return");case 7:x((function(n){var e=n.map((function(n){return n.id}));return[].concat((0,r.Z)(n),(0,r.Z)(a.filter((function(n){return!e.includes(n.id)})).map(S)))})),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Q(!0),e().then((function(){n&&Q(!1)})).catch((function(){n&&Q(!1)})),function(){n=!1}}),[R,B]);var K=null===(n=g.find((function(n){return!n.fetched})))||void 0===n?void 0:n.id;u.useEffect((function(){var n=!0,e=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){var t,a,i,u,s,l;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((F+1)*E<=I.length)){e.next=2;break}return e.abrupt("return");case 2:if(null!=K){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,b.Z.getLogoAnnotations(JSON.stringify(K),"",50);case 6:if(t=e.sent,a=t.data.results,n){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,b.Z.getLogosImages(a.map((function(n){return n.logo_id})));case 12:if(i=e.sent,u=i.data.logos,n){e.next=16;break}return e.abrupt("return");case 16:s={},a.forEach((function(n){var e=n.logo_id,t=n.distance;s[e]=t})),l=u.filter((function(n){var e=n.annotation_type,t=n.annotation_value,r=n.annotation_value_tag;return null==e&&null==t&&null==r})).map(S).map((function(n){return(0,c.Z)((0,c.Z)({},n),{},{distance:s[n.id]})})),q((function(n){var e={};n.forEach((function(n){var t=n.id;return e[t]=!0}));var t=n.slice(0,F*E),a=[].concat((0,r.Z)(n.slice(F*E,n.length)),(0,r.Z)(l.filter((function(n){var t=n.id;return!e[t]})))).sort((function(n,e){return n.distance-e.distance}));return x((function(n){return n.map((function(n){return n.id===K?(0,c.Z)((0,c.Z)({},n),{},{fetched:!0}):n}))})),[].concat((0,r.Z)(t),(0,r.Z)(a))}));case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return J(!0),e().then((function(){n&&J(!1)})).catch((function(){n&&J(!1)})),function(){n=!1}}),[I.length,K,F]);var V=u.useCallback((function(n){q((function(e){var t=e.findIndex((function(e){return e.id===n}));return t<0?e:[].concat((0,r.Z)(e.slice(0,t)),[(0,c.Z)((0,c.Z)({},e[t]),{},{selected:!e[t].selected})],(0,r.Z)(e.slice(t+1)))}))}),[]),Y=u.useCallback((function(n,e){q((function(t){var r={};return n.forEach((function(n){return r[n]=!0})),t.map((function(n){return r[n.id]?(0,c.Z)((0,c.Z)({},n),{},{selected:e}):n}))}))}),[]),nn=u.useState(!1),en=(0,a.Z)(nn,2),tn=en[0],rn=en[1],an=u.useCallback((function(){rn(!0)}),[]),on=u.useCallback((function(){rn(!1)}),[]);return(0,j.jsx)(u.Suspense,{fallback:(0,j.jsx)(p.Z,{}),children:(0,j.jsxs)(s.Z,{sx:{padding:2},children:[(0,j.jsx)(d.Z,{variant:"h4",sx:{mb:2},children:"Logo search"}),(0,j.jsx)(d.Z,{variant:"body1",children:"Select a logo you want to look for, and let's go to catch them all. For every logo you annotate, we will fetch it's neighbors such that you might never stop to annotate. (Press Shift to select range of logos)"}),(0,j.jsx)(l.Z,{sx:{my:3}}),(0,j.jsx)(h.Z,(0,c.Z)((0,c.Z)({},R),{},{request:function(n){var e=n.type,t=n.value;D(25),x([]),q([]),D({type:e,value:t})}})),(0,j.jsx)(d.Z,{variant:"h5",sx:{mt:5,mb:1},children:"Reference logos (logo already annotated with this value)"}),H?(0,j.jsx)(L,{}):null==g||0===g.length?(0,j.jsx)(_,(0,c.Z)({},R)):(0,j.jsx)(m.Z,{logos:g.slice(0,5),toggleLogoSelection:null,readOnly:!0,sx:{pt:0}}),(0,j.jsx)(l.Z,{sx:{my:3}}),(0,j.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"row",gap:1},children:[(0,j.jsx)(d.Z,{variant:"h5",sx:{mt:5,mb:1},children:"Remaining to annotate"}),(0,j.jsx)(f.Z,{onClick:function(){q((function(n){return n.map((function(n,e){return(0,c.Z)((0,c.Z)({},n),{},{selected:e<F*E&&e>=(F-1)*E||n.selected})}))}))},variant:"contained",sx:{ml:"auto",maxHeight:40,mt:"40px",mb:"8px"},children:"Select All"}),(0,j.jsx)(f.Z,{onClick:function(){q((function(n){return n.map((function(n){return(0,c.Z)((0,c.Z)({},n),{},{selected:!1})}))}))},variant:"contained",sx:{maxHeight:40,mt:"40px",mb:"8px"},children:"Deselect All"})]}),X&&(0,j.jsx)(Z.Z,{}),(0,j.jsx)(m.Z,{logos:I.slice((F-1)*E,F*E),toggleLogoSelection:V,setLogoSelectionRange:Y,sx:{pt:0}}),(0,j.jsxs)(v.Z,{elevation:0,sx:{display:"flex",flexDirection:"row",gap:1,position:"sticky",bottom:0,py:2},children:[(0,j.jsx)(f.Z,{disabled:1===F,onClick:function(){return W((function(n){return Math.max(1,n-1)}))},variant:"contained",sx:{width:200},children:"prev"}),(0,j.jsx)(f.Z,{fullWidth:!0,onClick:an,color:"success",variant:"contained",children:"Annotate"}),(0,j.jsx)(f.Z,{variant:"contained",sx:{width:200},onClick:function(){return W((function(n){return n+1}))},disabled:F*E>I.length,children:"next"})]}),(0,j.jsx)(k.Z,(0,c.Z)({game:"logoDeepSearch",isOpen:tn,logos:I,closeAnnotation:on,toggleLogoSelection:V,afterAnnotation:function(n){var e={};n.forEach((function(n){var t=n.id;return e[t]=!0})),x((function(e){return[].concat((0,r.Z)(e),(0,r.Z)(n))})),q((function(n){return n.filter((function(n){return!e[n.id]}))}))}},R))]})})}},7835:function(n,e,t){t.d(e,{Z:function(){return O}});var r=t(168),a=t(3366),o=t(7462),i=t(9867),c=t(2026),u=t(6020),s=t(4923),l=t(7237),f=t(6892),d=t(2689),v=t(3078),g=t(7090),p=t(5157),Z=t(3845);function m(n){return(0,Z.Z)("MuiLinearProgress",n)}(0,p.Z)("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);var h,b,x,y,k,w,j,S,C,L,_,P,I=t(2834),q=["className","color","value","valueBuffer","variant"],A=(0,s.F4)(j||(j=h||(h=(0,r.Z)(["\n  0% {\n    left: -35%;\n    right: 100%;\n  }\n\n  60% {\n    left: 100%;\n    right: -90%;\n  }\n\n  100% {\n    left: 100%;\n    right: -90%;\n  }\n"])))),B=(0,s.F4)(S||(S=b||(b=(0,r.Z)(["\n  0% {\n    left: -200%;\n    right: 100%;\n  }\n\n  60% {\n    left: 107%;\n    right: -8%;\n  }\n\n  100% {\n    left: 107%;\n    right: -8%;\n  }\n"])))),M=(0,s.F4)(C||(C=x||(x=(0,r.Z)(["\n  0% {\n    opacity: 1;\n    background-position: 0 -23px;\n  }\n\n  60% {\n    opacity: 0;\n    background-position: 0 -23px;\n  }\n\n  100% {\n    opacity: 1;\n    background-position: -200px -23px;\n  }\n"])))),N=function(n,e){return"inherit"===e?"currentColor":n.vars?n.vars.palette.LinearProgress["".concat(e,"Bg")]:"light"===n.palette.mode?(0,l.$n)(n.palette[e].main,.62):(0,l._j)(n.palette[e].main,.5)},R=(0,v.ZP)("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:function(n,e){var t=n.ownerState;return[e.root,e["color".concat((0,f.Z)(t.color))],e[t.variant]]}})((function(n){var e=n.ownerState,t=n.theme;return(0,o.Z)({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:N(t,e.color)},"inherit"===e.color&&"buffer"!==e.variant&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},"buffer"===e.variant&&{backgroundColor:"transparent"},"query"===e.variant&&{transform:"rotate(180deg)"})})),D=(0,v.ZP)("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:function(n,e){var t=n.ownerState;return[e.dashed,e["dashedColor".concat((0,f.Z)(t.color))]]}})((function(n){var e=n.ownerState,t=n.theme,r=N(t,e.color);return(0,o.Z)({position:"absolute",marginTop:0,height:"100%",width:"100%"},"inherit"===e.color&&{opacity:.3},{backgroundImage:"radial-gradient(".concat(r," 0%, ").concat(r," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})}),(0,s.iv)(L||(L=y||(y=(0,r.Z)(["\n    animation: "," 3s infinite linear;\n  "]))),M)),E=(0,v.ZP)("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:function(n,e){var t=n.ownerState;return[e.bar,e["barColor".concat((0,f.Z)(t.color))],("indeterminate"===t.variant||"query"===t.variant)&&e.bar1Indeterminate,"determinate"===t.variant&&e.bar1Determinate,"buffer"===t.variant&&e.bar1Buffer]}})((function(n){var e=n.ownerState,t=n.theme;return(0,o.Z)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:"inherit"===e.color?"currentColor":(t.vars||t).palette[e.color].main},"determinate"===e.variant&&{transition:"transform .".concat(4,"s linear")},"buffer"===e.variant&&{zIndex:1,transition:"transform .".concat(4,"s linear")})}),(function(n){var e=n.ownerState;return("indeterminate"===e.variant||"query"===e.variant)&&(0,s.iv)(_||(_=k||(k=(0,r.Z)(["\n      width: auto;\n      animation: "," 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;\n    "]))),A)})),z=(0,v.ZP)("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:function(n,e){var t=n.ownerState;return[e.bar,e["barColor".concat((0,f.Z)(t.color))],("indeterminate"===t.variant||"query"===t.variant)&&e.bar2Indeterminate,"buffer"===t.variant&&e.bar2Buffer]}})((function(n){var e=n.ownerState,t=n.theme;return(0,o.Z)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},"buffer"!==e.variant&&{backgroundColor:"inherit"===e.color?"currentColor":(t.vars||t).palette[e.color].main},"inherit"===e.color&&{opacity:.3},"buffer"===e.variant&&{backgroundColor:N(t,e.color),transition:"transform .".concat(4,"s linear")})}),(function(n){var e=n.ownerState;return("indeterminate"===e.variant||"query"===e.variant)&&(0,s.iv)(P||(P=w||(w=(0,r.Z)(["\n      width: auto;\n      animation: "," 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;\n    "]))),B)})),O=i.forwardRef((function(n,e){var t=(0,g.Z)({props:n,name:"MuiLinearProgress"}),r=t.className,i=t.color,s=void 0===i?"primary":i,l=t.value,v=t.valueBuffer,p=t.variant,Z=void 0===p?"indeterminate":p,h=(0,a.Z)(t,q),b=(0,o.Z)({},t,{color:s,variant:Z}),x=function(n){var e=n.classes,t=n.variant,r=n.color,a={root:["root","color".concat((0,f.Z)(r)),t],dashed:["dashed","dashedColor".concat((0,f.Z)(r))],bar1:["bar","barColor".concat((0,f.Z)(r)),("indeterminate"===t||"query"===t)&&"bar1Indeterminate","determinate"===t&&"bar1Determinate","buffer"===t&&"bar1Buffer"],bar2:["bar","buffer"!==t&&"barColor".concat((0,f.Z)(r)),"buffer"===t&&"color".concat((0,f.Z)(r)),("indeterminate"===t||"query"===t)&&"bar2Indeterminate","buffer"===t&&"bar2Buffer"]};return(0,u.Z)(a,m,e)}(b),y=(0,d.Z)(),k={},w={bar1:{},bar2:{}};if("determinate"===Z||"buffer"===Z)if(void 0!==l){k["aria-valuenow"]=Math.round(l),k["aria-valuemin"]=0,k["aria-valuemax"]=100;var j=l-100;"rtl"===y.direction&&(j=-j),w.bar1.transform="translateX(".concat(j,"%)")}else 0;if("buffer"===Z)if(void 0!==v){var S=(v||0)-100;"rtl"===y.direction&&(S=-S),w.bar2.transform="translateX(".concat(S,"%)")}else 0;return(0,I.jsxs)(R,(0,o.Z)({className:(0,c.Z)(x.root,r),ownerState:b,role:"progressbar"},k,{ref:e},h,{children:["buffer"===Z?(0,I.jsx)(D,{className:x.dashed,ownerState:b}):null,(0,I.jsx)(E,{className:x.bar1,ownerState:b,style:w.bar1}),"determinate"===Z?null:(0,I.jsx)(z,{className:x.bar2,ownerState:b,style:w.bar2})]}))}))}}]);
//# sourceMappingURL=331.fea3d7e7.chunk.js.map